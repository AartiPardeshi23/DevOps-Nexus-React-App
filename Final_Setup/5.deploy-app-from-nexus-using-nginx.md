Excellent ğŸ‰
You have successfully completed the **artifact lifecycle** from **GitHub â†’ Build â†’ Nexus â†’ Local download**.

Now weâ€™ll complete the **FINAL LEG of your diagram**.

---

# ğŸš€ PHASE 7: DEPLOY APPLICATION USING NGINX (FROM NEXUS ARTIFACT)

ğŸ“ **Where**: VM
ğŸ“ **Source**: Nexus ZIP
ğŸ“ **Server**: Nginx (Docker container)
ğŸ“ **Result**: App served via Nginx

---

## ğŸ§± ARCHITECTURE (FINAL)

```
Nginx â†’ Node.js API â†’ PostgreSQL
     â†‘
   Nexus ZIP
```

---

# ğŸ”¹ STEP 7.1: PREPARE DEPLOYMENT FOLDER

```bash
cd ~/nubeera
mkdir deploy
cd deploy
```

---

# ğŸ”¹ STEP 7.2: DOWNLOAD ZIP FROM NEXUS (VM)

```bash
curl -u admin:<NEXUS_PASSWORD> \
-o employee-app-1.0.0.zip \
http://localhost:8081/repository/employee-raw-repo/employee-app/employee-app-1.0.0.zip
```

---

# ğŸ”¹ STEP 7.3: EXTRACT ARTIFACT

```bash
unzip employee-app-1.0.0.zip
cd employee-app
```

You should see:

```
backend
docker-compose.yml
```

---

# ğŸ”¹ STEP 7.4: ADD NGINX (REVERSE PROXY)

### ğŸ“„ Create `nginx.conf`

```bash
nano nginx.conf
```

Paste:

```nginx
events {}

http {
  server {
    listen 80;

    location / {
      proxy_pass http://nodeapp:3000;
    }
  }
}
```

---

# ğŸ”¹ STEP 7.5: UPDATE docker-compose.yml

Edit:

```bash
nano docker-compose.yml
```

### âœ… Replace with this **FINAL VERSION**

```yaml
version: "3.8"

services:
  postgres:
    image: postgres:15
    container_name: employee-postgres
    environment:
      POSTGRES_DB: employeedb
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: admin123
    volumes:
      - pgdata:/var/lib/postgresql/data

  nodeapp:
    build: ./backend
    container_name: employee-nodeapp
    depends_on:
      - postgres
    environment:
      DB_HOST: postgres
      DB_USER: admin
      DB_PASSWORD: admin123
      DB_NAME: employeedb
      DB_PORT: 5432

  nginx:
    image: nginx:latest
    container_name: employee-nginx
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - nodeapp

volumes:
  pgdata:
```

---

# ğŸ”¹ STEP 7.6: BUILD & RUN FULL STACK

```bash
docker-compose down
docker-compose up --build -d
```

---

# ğŸ”¹ STEP 7.7: VERIFY CONTAINERS

```bash
docker ps
```

You MUST see:

```
employee-postgres
employee-nodeapp
employee-nginx
```

---

# ğŸ”¹ STEP 7.8: ACCESS APPLICATION (FINAL)

ğŸŒ Browser:

```
http://<VM-IP>
```

âœ” Served via **Nginx**
âœ” Node.js behind proxy
âœ” PostgreSQL persistent
âœ” Artifact-based deployment

---

# ğŸ§ª FINAL VERIFICATION

Add employee in UI â†’
Check DB:

```bash
docker exec -it employee-postgres psql -U admin -d employeedb -c "SELECT * FROM employees;"
```

---

# ğŸ¯ WHAT YOU HAVE ACHIEVED (BIG DEAL)

âœ” Multi-container app
âœ” GitHub source control
âœ” Nexus artifact repository
âœ” Versioned build ZIP
âœ” Nginx deployment
âœ” Enterprise DevOps pipeline

---

Youâ€™ve done an **end-to-end enterprise DevOps pipeline** ğŸš€ğŸ‘
